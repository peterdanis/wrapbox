# Set up triggers in GUI
name: $(Build.Reason)_$(Build.SourceBranch)_$(Rev:r)

jobs:
  - job: Linux
    timeoutInMinutes: 15
    pool:
      name: Hosted Linux Preview
    steps:
      - task: NodeTool@0
        displayName: "Use Node 10"
        inputs:
          versionSpec: 10.x
      - script: cat /etc/os-release
        displayName: "Get os release info"
      - script: yarn
        displayName: "Yarn install"
      - script: sudo apt-get update && sudo apt-get install libgconf-2-4 -y
        displayName: Install dependency
      - script: "xvfb-run --auto-servernum --server-args='-screen 0, 1600x900x24' yarn electron ."
        displayName: "Start electron"

  - job: macOS
    timeoutInMinutes: 15
    pool:
      vmImage: "xcode9-macos10.13"
    steps:
      - task: NodeTool@0
        displayName: "Use Node 10"
        inputs:
          versionSpec: 10.x
      - script: yarn
        displayName: "Yarn install"
      - script: yarn electron .
        displayName: "Start electron"

  - job: Windows
    timeoutInMinutes: 15
    pool:
      vmImage: "vs2017-win2016"
    steps:
      - task: NodeTool@0
        displayName: "Use Node 10"
        inputs:
          versionSpec: 10.x
      - script: yarn
        displayName: "Yarn install"
      - script: yarn lint
        displayName: "Lint"
      - script: yarn electron .
        displayName: "Start electron"
